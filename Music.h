/*
*	Music.h
*
*	Created: 2018-06-26 오전 6:36:52
*	Modified 2018-11-19 for Attiny 4313
*	Author: Cakeng (PARK JONG SEOK)
*
*	NO LICENCE INCLUDED
*	Contact cakeng@naver.com to
*	use, modify, or share the software for any purpose
*	other than personal use.
*
*/

#ifndef MUSIC_CAKENG_H
#define MUSIC_CAKENG_H
#include <avr/io.h>
#include <avr/pgmspace.h>
#include "Basic.h"


class MusicObj
{
	private:

	bool onFlag;
	uint16_t sheetLength;
	volatile uint16_t musicPosition;
	volatile uint16_t musicTime;
	volatile uint16_t noteBuffer;
	volatile uint8_t channelVolume;
	uint16_t musicTimeConst;
	uint16_t o2notebox[12]; //Used Set of max values of ICR
	volatile uint16_t musicTicks;

	uint8_t controlAOnSettings;
	uint8_t controlBOnSettings;

	void dataRead(uint16_t data);

	public:
	bool isOn()
	{
		return onFlag;
	}
	void musicOn()
	{
		onFlag = true;
	}
	void musicOff();

	void musicDown();

	void musicOut();

	MusicObj(uint16_t tickFreq);

	void musicFunction();
	
	void autoRoutine();
};

const PROGMEM uint16_t sheet0[] = 
{
	0
	,0b0010000100101100,0b0000100100101111,0b0000100100101111,0b0000100101001111,0b0000100101001011,0b0000100101001111,0b0000010101001011,0b0000110101001111,0b0000100101001011,
	0b0000100101000011,0b0000100100111011,0b0000100101000011,0b0000010101011111,0b0001010101011111,0b0000010101001000,0b0000100101001011,0b0000010101001111,0b0000011101010111,0b0000011101001011,
	0b0000010101000011,0b0000100101000011,0b0000010100111011,0b0001010100111011,0b0001000100101100,0b0000011100101111,0b0000011100110011,0b0000010100111011,0b0000100100111011,0b0000100100110011,
	0b0000100100110011,0b0000010101000011,0b0000100100111011,0b0000010100101111,0b0000010100100111,0b0000101100011111,0b0000001100010000,0b0000010100010011,0b0000010100011111,0b0000100100111011,
	0b0000100100110011,0b0000100100110011,0b0000010101000011,0b0000110101000011,0b0000100100111111,0b0000100101000011,0b0000100101001011,0b0000100101001111,0b0000100101001011,0b0000100101001111,
	0b0000010101001011,0b0000110101001111,0b0000100101001011,0b0000100101000011,0b0000100100111011,0b0000100101000011,0b0000010101011111,0b0001010101011111,0b0000010101001000,0b0000100101001011,
	0b0000010101001111,0b0000011101010111,0b0000011101001011,0b0000010101000011,0b0000100101000011,0b0000100100111011,0b0000100100111011,0b0000010101010111,0b0000111101001111,0b0000011100101100,
	0b0000011100101111,0b0000011100110011,0b0000010100111011,0b0000100100111011,0b0000100100110011,0b0000100100110011,0b0000100100111011,0b0000111100101111,0b0000001100100100,0b0000100100100111,
	0b0000010100011111,0b0000010100011111,0b0000010100111010,0b0000010100011110,0b0000010100100110,0b0000010100011110,0b0000010100101110,0b0000010100001010,0b0000010100011110,0b0000010100100110,
	0b0000010100101110,0b0000010100011110,0b0000010100101110,0b0000110100110010,0b0000100100011111,0b0000100101000011,0b0000100101000011,0b0000100101000011,0b0000010101001111,0b0000110101001011,

	0b0000010101001111,0b0000110101010111,0b0000010101001011,0b0000110100111011,0b0000100100111011,0b0000100100101111,0b0000010100111011,0b0001010101000011,0b0000100100101100,0b0000100100101111,
	0b0000100100110011,0b0000100100101111,0b0000100100011111,0b0000010100100111,0b0000110100110011,0b0000100100101111,0b0000100100100111,0b0000100100011111,0b0000100100100111,0b0000010100011111,
	0b0000100100100111,0b0000010100111011,0b0001001100101111,0b0000011100011100,0b0000100100011111,0b0000100100011111,0b0000100101000011,0b0000010101000011,0b0000110101000011,0b0000100101001111,
	0b0000100101001011,0b0000010101001111,0b0000110101010111,0b0000100101001011,0b0000100100111011,0b0000010100111011,0b0000100101010111,0b0000010101001011,0b0001010101001111,0b0000010101000000,
	0b0000100101000011,0b0000100101001011,0b0000100101001111,0b0000010101001111,0b0000100101001111,0b0000010101001011,0b0000110101001111,0b0000010101000000,0b0000100101000011,0b0000100101001011,
	0b0000100101001111,0b0000001101001111,0b0000011101001100,0b0000001101001110,0b0000011101001100,0b0000001101001110,0b0000011101001100,0b0000001101001110,0b0000011101010100,0b0000001101010110,
	0b0000011101010100,0b0000001101010110,0b0000011101010100,0b0000001101010110,0b0000011101010100,0b0000001101010110,0b0000011100011000,0b0000010100011010,0b0000010100110110,0b0000010101000010,
	0b0000010100110110,0b0000010101001010,0b0000010101000010,0b0000010101001110,0b0000010101010110,0b0000110101100010,0b0000010100101100,0b0000100100101111,0b0000100100101111,0b0000100101001111,
	0b0000100101001011,0b0000100101001111,0b0000010101001011,0b0000101101001111,0b0000001101001000,0b0000100101001011,0b0000100101000011,0b0000100100111011,0b0000100101000011,0b0000010101011111,
	0b0001010101011111,0b0000010101001000,0b0000100101001011,0b0000010101001111,0b0000011101010111,0b0000011101001011,0b0000010101000011,0b0000100101000011,0b0000010100111011,0b0001010100111011,

	0b0001000100101100,0b0000011100101111,0b0000011100110011,0b0000010100111011,0b0000100100111011,0b0000100100110011,0b0000100100110011,0b0000010101000011,0b0000100100111011,0b0000010100101111,
	0b0000010100100111,0b0000101100011111,0b0000001100010000,0b0000010100010011,0b0000010100011111,0b0000100100111011,0b0000100100110011,0b0000100100110011,0b0000010101000011,0b0000110101000011,
	0b0000100100111111,0b0000100101000011,0b0000100101001011,0b0000100101001111,0b0000100101001011,0b0000100101001111,0b0000010101001011,0b0000101101001111,0b0000001101001000,0b0000100101001011,
	0b0000100101000011,0b0000100100111011,0b0000100101000011,0b0000010101011111,0b0001010101011111,0b0000010101001000,0b0000100101001011,0b0000010101001111,0b0000011101010111,0b0000011101001011,
	0b0000010101000011,0b0000100101000011,0b0000100100111011,0b0000100100111011,0b0000010101010111,0b0000111101001111,0b0000011100101100,0b0000011100101111,0b0000011100110011,0b0000010100111011,
	0b0000100100111011,0b0000100100110011,0b0000100100110011,0b0000010101000011,0b0000100100111011,0b0000010100011111,0b0000111100011111,0b0000001100010000,0b0000010100010011,0b0000010100011111,
	0b0000100100111011,0b0000100100110011,0b0000100100110011,0b0000010101000011,0b0000100100111011,0b0000010101001111,0b0000111101001111,0b0000001100011100,0b0000010100011111,0b0000010100100111,
	0b0000101100110011,0b0000001100101100,0b0000100100101111,0b0000001100110000,0b0000100100110011,0b0000011100111011,0b0001001100101111,0b0000001100100100,0b0100000100100111,0b0001000100011100,
	0b0000100100011111,0b0000010100011010,0b0011010100011111
	,0
};
//564bytes

#endif

